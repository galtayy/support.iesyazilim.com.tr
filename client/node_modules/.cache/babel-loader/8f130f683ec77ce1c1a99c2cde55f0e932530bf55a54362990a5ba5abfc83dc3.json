{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import{format}from'date-fns';import{tr}from'date-fns/locale';import{toast}from'react-toastify';import{PencilIcon,TrashIcon,CheckIcon,XMarkIcon,PhotoIcon,ArrowDownTrayIcon,EnvelopeIcon}from'@heroicons/react/24/outline';import{useAuth}from'../../context/AuthContext';import PageHeader from'../../components/ui/PageHeader';import Card from'../../components/ui/Card';import Badge from'../../components/ui/Badge';import Spinner from'../../components/ui/Spinner';import Alert from'../../components/ui/Alert';import Modal from'../../components/ui/Modal';import ticketService from'../../services/ticketService';import approvalService from'../../services/approvalService';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TicketDetails=()=>{var _ticket$Customer,_ticket$Customer2,_ticket$Category,_ticket$Category2,_ticket$Category3,_ticket$supportStaff,_ticket$supportStaff2,_ticket$supportStaff3,_ticket$supportStaff4,_ticket$Customer3,_ticket$approver,_ticket$approver2;const{id}=useParams();const navigate=useNavigate();const{user}=useAuth();const isAdmin=(user===null||user===void 0?void 0:user.role)==='admin';const[ticket,setTicket]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[approvalLoading,setApprovalLoading]=useState(false);const[emailLoading,setEmailLoading]=useState(false);const[deleteLoading,setDeleteLoading]=useState(false);const[showApprovalModal,setShowApprovalModal]=useState(false);const[showRejectModal,setShowRejectModal]=useState(false);const[showDeleteModal,setShowDeleteModal]=useState(false);const[approvalNotes,setApprovalNotes]=useState('');const[rejectNotes,setRejectNotes]=useState('');const[selectedImage,setSelectedImage]=useState(null);const[showImageModal,setShowImageModal]=useState(false);// Load ticket data\nuseEffect(()=>{const fetchTicket=async()=>{try{setLoading(true);const response=await ticketService.getTicket(id);setTicket(response.data);}catch(error){console.error('Error fetching ticket:',error);setError('Destek kaydı yüklenirken bir hata oluştu.');}finally{setLoading(false);}};fetchTicket();},[id]);// Handle approve ticket\nconst handleApprove=async()=>{try{setApprovalLoading(true);await ticketService.updateTicketStatus(id,'approved',approvalNotes);// Update local state\nsetTicket(prev=>({...prev,status:'approved',approvalNotes,approvalDate:new Date().toISOString(),approver:{id:user.id,firstName:user.firstName,lastName:user.lastName}}));// Close modal\nsetShowApprovalModal(false);setApprovalNotes('');// Show success message\ntoast.success('Destek kaydı başarıyla onaylandı.');}catch(error){console.error('Error approving ticket:',error);toast.error('Destek kaydı onaylanırken bir hata oluştu.');}finally{setApprovalLoading(false);}};// Handle reject ticket\nconst handleReject=async()=>{try{setApprovalLoading(true);await ticketService.updateTicketStatus(id,'rejected',rejectNotes);// Update local state\nsetTicket(prev=>({...prev,status:'rejected',approvalNotes:rejectNotes,approvalDate:new Date().toISOString(),approver:{id:user.id,firstName:user.firstName,lastName:user.lastName}}));// Close modal\nsetShowRejectModal(false);setRejectNotes('');// Show success message\ntoast.success('Destek kaydı reddedildi.');}catch(error){console.error('Error rejecting ticket:',error);toast.error('Destek kaydı reddedilirken bir hata oluştu.');}finally{setApprovalLoading(false);}};// Handle delete ticket\nconst handleDelete=async()=>{try{setDeleteLoading(true);await ticketService.deleteTicket(id);// Close modal\nsetShowDeleteModal(false);// Show success message\ntoast.success('Destek kaydı başarıyla silindi.');// Navigate to ticket list\nnavigate('/tickets');}catch(error){console.error('Error deleting ticket:',error);toast.error('Destek kaydı silinirken bir hata oluştu.');setDeleteLoading(false);}};// Handle image click\nconst handleImageClick=image=>{setSelectedImage(image);setShowImageModal(true);};// Format status\nconst getStatusLabel=status=>{switch(status){case'pending':return'Onay Bekliyor';case'approved':return'Onaylandı';case'rejected':return'Reddedildi';default:return status;}};// Calculate duration in hours\nconst calculateDuration=(startTime,endTime)=>{const start=new Date(startTime);const end=new Date(endTime);const durationHours=((end-start)/(1000*60*60)).toFixed(1);return durationHours;};// Send approval email\nconst handleSendApprovalEmail=async()=>{try{setEmailLoading(true);const response=await approvalService.sendApprovalEmail(id);// Show success message\ntoast.success(`Onay e-postası ${response.data.sentTo} adresine gönderildi.`);// Update ticket emailSent status\nsetTicket(prev=>({...prev,emailSent:true}));}catch(error){console.error('Error sending approval email:',error);// Show error message\nif(error.response&&error.response.data&&error.response.data.error){toast.error(error.response.data.error);}else{toast.error('E-posta gönderilirken bir hata oluştu.');}}finally{setEmailLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-12\",children:/*#__PURE__*/_jsx(Spinner,{size:\"lg\"})});}if(error||!ticket){return/*#__PURE__*/_jsx(Alert,{type:\"error\",title:\"Hata\",message:error||'Destek kaydı bulunamadı.',className:\"mt-6\"});}// Check if user has permission to edit/delete\nconst canEdit=isAdmin||ticket.supportStaffId===user.id&&ticket.status==='pending';const canDelete=isAdmin||ticket.supportStaffId===user.id&&ticket.status==='pending';const canSendEmail=(isAdmin||ticket.supportStaffId===user.id)&&ticket.status==='pending'&&((_ticket$Customer=ticket.Customer)===null||_ticket$Customer===void 0?void 0:_ticket$Customer.contactEmail);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PageHeader,{title:\"Destek Kayd\\u0131 Detay\\u0131\",description:\"Destek kayd\\u0131 bilgilerini g\\xF6r\\xFCnt\\xFCleyin\",breadcrumbItems:[{label:'Destek Kayıtları',to:'/tickets'},{label:'Detay'}],actions:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-2\",children:[canEdit&&/*#__PURE__*/_jsxs(Link,{to:`/tickets/${id}/edit`,className:\"btn btn-outline flex items-center justify-center w-full sm:w-auto\",children:[/*#__PURE__*/_jsx(PencilIcon,{className:\"-ml-1 mr-2 h-5 w-5\"}),\"D\\xFCzenle\"]}),canDelete&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-danger flex items-center justify-center w-full sm:w-auto\",onClick:()=>setShowDeleteModal(true),children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"-ml-1 mr-2 h-5 w-5\"}),\"Sil\"]}),canSendEmail&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary flex items-center justify-center w-full sm:w-auto\",onClick:handleSendApprovalEmail,disabled:emailLoading,children:emailLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Spinner,{size:\"sm\",color:\"white\",className:\"mr-2\"}),\" G\\xF6nderiliyor...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(EnvelopeIcon,{className:\"-ml-1 mr-2 h-5 w-5\"}),\"E-posta ile Onay \\u0130ste\"]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 grid grid-cols-1 gap-6 lg:grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2\",children:[/*#__PURE__*/_jsxs(Card,{title:\"Destek Kayd\\u0131 Bilgileri\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 pb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-500\",children:\"M\\xFC\\u015Fteri\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-900\",children:(_ticket$Customer2=ticket.Customer)===null||_ticket$Customer2===void 0?void 0:_ticket$Customer2.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-500\",children:\"Kategori\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\",style:{backgroundColor:`${(_ticket$Category=ticket.Category)===null||_ticket$Category===void 0?void 0:_ticket$Category.color}20`,color:(_ticket$Category2=ticket.Category)===null||_ticket$Category2===void 0?void 0:_ticket$Category2.color},children:(_ticket$Category3=ticket.Category)===null||_ticket$Category3===void 0?void 0:_ticket$Category3.name})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-500\",children:\"Ba\\u015Flang\\u0131\\xE7 Zaman\\u0131\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-900\",children:format(new Date(ticket.startTime),'dd MMMM yyyy HH:mm',{locale:tr})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-500\",children:\"Biti\\u015F Zaman\\u0131\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-900\",children:format(new Date(ticket.endTime),'dd MMMM yyyy HH:mm',{locale:tr})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-500\",children:\"Toplam S\\xFCre\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-900\",children:[calculateDuration(ticket.startTime,ticket.endTime),\" saat\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-500\",children:\"Durum\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsx(Badge,{status:ticket.status,label:getStatusLabel(ticket.status)})})]}),ticket.location&&/*#__PURE__*/_jsxs(\"div\",{className:\"sm:col-span-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-500\",children:\"Konum\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-900\",children:ticket.location})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-500\",children:\"\\u0130\\u015F A\\xE7\\u0131klamas\\u0131\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 whitespace-pre-line text-sm text-gray-900\",children:ticket.description})]})]}),ticket.TicketImages&&ticket.TicketImages.length>0&&/*#__PURE__*/_jsx(Card,{title:\"Foto\\u011Fraflar\",className:\"mt-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4\",children:ticket.TicketImages.map(image=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative cursor-pointer overflow-hidden rounded-lg group aspect-square\",onClick:()=>handleImageClick(image),children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-full w-full overflow-hidden\",children:/*#__PURE__*/_jsx(\"img\",{src:`${process.env.REACT_APP_API_URL||'http://localhost:5051'}/${image.imagePath}`,alt:image.description||'Destek kaydı fotoğrafı',className:\"h-full w-full object-cover object-center transition-transform duration-200 group-hover:scale-105\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 opacity-0 transition-opacity duration-200 group-hover:opacity-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-white\",children:[/*#__PURE__*/_jsx(ArrowDownTrayIcon,{className:\"h-6 w-6 mx-auto\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"G\\xF6r\\xFCnt\\xFCle\"})]})})]},image.id))})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Card,{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700\",children:\"Destek Personeli\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-medium\",children:[(_ticket$supportStaff=ticket.supportStaff)===null||_ticket$supportStaff===void 0?void 0:_ticket$supportStaff.firstName.charAt(0),(_ticket$supportStaff2=ticket.supportStaff)===null||_ticket$supportStaff2===void 0?void 0:_ticket$supportStaff2.lastName.charAt(0)]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900\",children:[(_ticket$supportStaff3=ticket.supportStaff)===null||_ticket$supportStaff3===void 0?void 0:_ticket$supportStaff3.firstName,\" \",(_ticket$supportStaff4=ticket.supportStaff)===null||_ticket$supportStaff4===void 0?void 0:_ticket$supportStaff4.lastName]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Destek Personeli\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700\",children:\"Olu\\u015Fturulma Tarihi\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-600\",children:format(new Date(ticket.createdAt),'dd MMMM yyyy HH:mm',{locale:tr})})]}),((_ticket$Customer3=ticket.Customer)===null||_ticket$Customer3===void 0?void 0:_ticket$Customer3.contactPerson)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700\",children:\"M\\xFC\\u015Fteri Yetkilisi\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-900\",children:ticket.Customer.contactPerson}),ticket.Customer.contactEmail&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:ticket.Customer.contactEmail}),ticket.Customer.contactPhone&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:ticket.Customer.contactPhone})]}),ticket.status!=='pending'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700\",children:ticket.status==='approved'?'Onay Bilgileri':'Red Bilgileri'}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-700\",children:\"Tarih: \"}),format(new Date(ticket.approvalDate),'dd MMMM yyyy HH:mm',{locale:tr})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-700\",children:\"Onaylayan: \"}),ticket.externalApproval?'Müşteri (E-posta ile)':`${(_ticket$approver=ticket.approver)===null||_ticket$approver===void 0?void 0:_ticket$approver.firstName} ${(_ticket$approver2=ticket.approver)===null||_ticket$approver2===void 0?void 0:_ticket$approver2.lastName}`]}),ticket.approvalNotes&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-700 text-sm\",children:\"Notlar:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-600 whitespace-pre-line\",children:ticket.approvalNotes})]})]})]}),isAdmin&&ticket.status==='pending'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-700 mb-3\",children:\"Y\\xF6netici \\u0130\\u015Flemleri\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-2\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-success flex items-center justify-center w-full\",onClick:()=>setShowApprovalModal(true),children:[/*#__PURE__*/_jsx(CheckIcon,{className:\"-ml-1 mr-2 h-5 w-5\"}),\"Onayla\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-danger flex items-center justify-center w-full\",onClick:()=>setShowRejectModal(true),children:[/*#__PURE__*/_jsx(XMarkIcon,{className:\"-ml-1 mr-2 h-5 w-5\"}),\"Reddet\"]})]})]})]})})})]}),/*#__PURE__*/_jsxs(Modal,{open:showApprovalModal,onClose:()=>setShowApprovalModal(false),title:\"Destek Kayd\\u0131n\\u0131 Onayla\",footer:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline\",onClick:()=>setShowApprovalModal(false),disabled:approvalLoading,children:\"\\u0130ptal\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-success ml-3\",onClick:handleApprove,disabled:approvalLoading,children:approvalLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Spinner,{size:\"sm\",color:\"white\",className:\"mr-2\"}),\" Onaylan\\u0131yor...\"]}):'Onayla'})]}),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Bu destek kayd\\u0131n\\u0131 onaylamak \\xFCzeresiniz. Onay sonras\\u0131 bu i\\u015Flem geri al\\u0131namaz.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"approvalNotes\",className:\"block text-sm font-medium text-gray-700\",children:\"Onay Notlar\\u0131 (\\u0130ste\\u011Fe Ba\\u011Fl\\u0131)\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"approvalNotes\",className:\"mt-1 form-input\",rows:3,value:approvalNotes,onChange:e=>setApprovalNotes(e.target.value)})]})]}),/*#__PURE__*/_jsxs(Modal,{open:showRejectModal,onClose:()=>setShowRejectModal(false),title:\"Destek Kayd\\u0131n\\u0131 Reddet\",footer:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline\",onClick:()=>setShowRejectModal(false),disabled:approvalLoading,children:\"\\u0130ptal\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger ml-3\",onClick:handleReject,disabled:approvalLoading,children:approvalLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Spinner,{size:\"sm\",color:\"white\",className:\"mr-2\"}),\" \\u0130\\u015Fleniyor...\"]}):'Reddet'})]}),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Bu destek kayd\\u0131n\\u0131 reddetmek \\xFCzeresiniz. Ret sonras\\u0131 bu i\\u015Flem geri al\\u0131namaz.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"rejectNotes\",className:\"block text-sm font-medium text-gray-700\",children:\"Ret Nedeni\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"rejectNotes\",className:\"mt-1 form-input\",rows:3,value:rejectNotes,onChange:e=>setRejectNotes(e.target.value),required:true})]})]}),/*#__PURE__*/_jsx(Modal,{open:showDeleteModal,onClose:()=>setShowDeleteModal(false),title:\"Destek Kayd\\u0131n\\u0131 Sil\",footer:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline\",onClick:()=>setShowDeleteModal(false),disabled:deleteLoading,children:\"\\u0130ptal\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger ml-3\",onClick:handleDelete,disabled:deleteLoading,children:deleteLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Spinner,{size:\"sm\",color:\"white\",className:\"mr-2\"}),\" Siliniyor...\"]}):'Sil'})]}),children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-600\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Bu destek kayd\\u0131n\\u0131 silmek istedi\\u011Finizden emin misiniz?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 font-medium\",children:\"Bu i\\u015Flem geri al\\u0131namaz.\"})]})}),/*#__PURE__*/_jsx(Modal,{open:showImageModal,onClose:()=>setShowImageModal(false),title:\"Foto\\u011Fraf G\\xF6r\\xFCnt\\xFCleme\",size:\"lg\",children:selectedImage&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:`${process.env.REACT_APP_API_URL||'http://localhost:5051'}/${selectedImage.imagePath}`,alt:selectedImage.description||'Destek kaydı fotoğrafı',className:\"max-h-96 max-w-full object-contain\"}),selectedImage.description&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-center text-gray-700\",children:selectedImage.description}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsxs(\"a\",{href:`${process.env.REACT_APP_API_URL||'http://localhost:5051'}/${selectedImage.imagePath}`,download:true,target:\"_blank\",rel:\"noopener noreferrer\",className:\"btn btn-primary flex items-center\",children:[/*#__PURE__*/_jsx(ArrowDownTrayIcon,{className:\"-ml-1 mr-2 h-5 w-5\"}),\"\\u0130ndir\"]})})]})})]});};export default TicketDetails;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","format","tr","toast","PencilIcon","TrashIcon","CheckIcon","XMarkIcon","PhotoIcon","ArrowDownTrayIcon","EnvelopeIcon","useAuth","PageHeader","Card","Badge","Spinner","Alert","Modal","ticketService","approvalService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TicketDetails","_ticket$Customer","_ticket$Customer2","_ticket$Category","_ticket$Category2","_ticket$Category3","_ticket$supportStaff","_ticket$supportStaff2","_ticket$supportStaff3","_ticket$supportStaff4","_ticket$Customer3","_ticket$approver","_ticket$approver2","id","navigate","user","isAdmin","role","ticket","setTicket","loading","setLoading","error","setError","approvalLoading","setApprovalLoading","emailLoading","setEmailLoading","deleteLoading","setDeleteLoading","showApprovalModal","setShowApprovalModal","showRejectModal","setShowRejectModal","showDeleteModal","setShowDeleteModal","approvalNotes","setApprovalNotes","rejectNotes","setRejectNotes","selectedImage","setSelectedImage","showImageModal","setShowImageModal","fetchTicket","response","getTicket","data","console","handleApprove","updateTicketStatus","prev","status","approvalDate","Date","toISOString","approver","firstName","lastName","success","handleReject","handleDelete","deleteTicket","handleImageClick","image","getStatusLabel","calculateDuration","startTime","endTime","start","end","durationHours","toFixed","handleSendApprovalEmail","sendApprovalEmail","sentTo","emailSent","className","children","size","type","title","message","canEdit","supportStaffId","canDelete","canSendEmail","Customer","contactEmail","description","breadcrumbItems","label","to","actions","onClick","disabled","color","name","style","backgroundColor","Category","locale","location","TicketImages","length","map","src","process","env","REACT_APP_API_URL","imagePath","alt","supportStaff","charAt","createdAt","contactPerson","contactPhone","externalApproval","open","onClose","footer","htmlFor","rows","value","onChange","e","target","required","href","download","rel"],"sources":["/Users/gurkanaltay/Desktop/projects/support.iesyazilim.com.tr/client/src/pages/tickets/TicketDetails.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { format } from 'date-fns';\nimport { tr } from 'date-fns/locale';\nimport { toast } from 'react-toastify';\nimport { \n  PencilIcon, \n  TrashIcon, \n  CheckIcon, \n  XMarkIcon,\n  PhotoIcon,\n  ArrowDownTrayIcon,\n  EnvelopeIcon\n} from '@heroicons/react/24/outline';\nimport { useAuth } from '../../context/AuthContext';\nimport PageHeader from '../../components/ui/PageHeader';\nimport Card from '../../components/ui/Card';\nimport Badge from '../../components/ui/Badge';\nimport Spinner from '../../components/ui/Spinner';\nimport Alert from '../../components/ui/Alert';\nimport Modal from '../../components/ui/Modal';\nimport ticketService from '../../services/ticketService';\nimport approvalService from '../../services/approvalService';\n\nconst TicketDetails = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const isAdmin = user?.role === 'admin';\n  \n  const [ticket, setTicket] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [approvalLoading, setApprovalLoading] = useState(false);\n  const [emailLoading, setEmailLoading] = useState(false);\n  const [deleteLoading, setDeleteLoading] = useState(false);\n  const [showApprovalModal, setShowApprovalModal] = useState(false);\n  const [showRejectModal, setShowRejectModal] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [approvalNotes, setApprovalNotes] = useState('');\n  const [rejectNotes, setRejectNotes] = useState('');\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [showImageModal, setShowImageModal] = useState(false);\n\n  // Load ticket data\n  useEffect(() => {\n    const fetchTicket = async () => {\n      try {\n        setLoading(true);\n        const response = await ticketService.getTicket(id);\n        setTicket(response.data);\n      } catch (error) {\n        console.error('Error fetching ticket:', error);\n        setError('Destek kaydı yüklenirken bir hata oluştu.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchTicket();\n  }, [id]);\n\n  // Handle approve ticket\n  const handleApprove = async () => {\n    try {\n      setApprovalLoading(true);\n      await ticketService.updateTicketStatus(id, 'approved', approvalNotes);\n      \n      // Update local state\n      setTicket(prev => ({\n        ...prev,\n        status: 'approved',\n        approvalNotes,\n        approvalDate: new Date().toISOString(),\n        approver: {\n          id: user.id,\n          firstName: user.firstName,\n          lastName: user.lastName\n        }\n      }));\n      \n      // Close modal\n      setShowApprovalModal(false);\n      setApprovalNotes('');\n      \n      // Show success message\n      toast.success('Destek kaydı başarıyla onaylandı.');\n    } catch (error) {\n      console.error('Error approving ticket:', error);\n      toast.error('Destek kaydı onaylanırken bir hata oluştu.');\n    } finally {\n      setApprovalLoading(false);\n    }\n  };\n\n  // Handle reject ticket\n  const handleReject = async () => {\n    try {\n      setApprovalLoading(true);\n      await ticketService.updateTicketStatus(id, 'rejected', rejectNotes);\n      \n      // Update local state\n      setTicket(prev => ({\n        ...prev,\n        status: 'rejected',\n        approvalNotes: rejectNotes,\n        approvalDate: new Date().toISOString(),\n        approver: {\n          id: user.id,\n          firstName: user.firstName,\n          lastName: user.lastName\n        }\n      }));\n      \n      // Close modal\n      setShowRejectModal(false);\n      setRejectNotes('');\n      \n      // Show success message\n      toast.success('Destek kaydı reddedildi.');\n    } catch (error) {\n      console.error('Error rejecting ticket:', error);\n      toast.error('Destek kaydı reddedilirken bir hata oluştu.');\n    } finally {\n      setApprovalLoading(false);\n    }\n  };\n\n  // Handle delete ticket\n  const handleDelete = async () => {\n    try {\n      setDeleteLoading(true);\n      await ticketService.deleteTicket(id);\n      \n      // Close modal\n      setShowDeleteModal(false);\n      \n      // Show success message\n      toast.success('Destek kaydı başarıyla silindi.');\n      \n      // Navigate to ticket list\n      navigate('/tickets');\n    } catch (error) {\n      console.error('Error deleting ticket:', error);\n      toast.error('Destek kaydı silinirken bir hata oluştu.');\n      setDeleteLoading(false);\n    }\n  };\n\n  // Handle image click\n  const handleImageClick = (image) => {\n    setSelectedImage(image);\n    setShowImageModal(true);\n  };\n\n  // Format status\n  const getStatusLabel = (status) => {\n    switch (status) {\n      case 'pending': return 'Onay Bekliyor';\n      case 'approved': return 'Onaylandı';\n      case 'rejected': return 'Reddedildi';\n      default: return status;\n    }\n  };\n\n  // Calculate duration in hours\n  const calculateDuration = (startTime, endTime) => {\n    const start = new Date(startTime);\n    const end = new Date(endTime);\n    const durationHours = ((end - start) / (1000 * 60 * 60)).toFixed(1);\n    return durationHours;\n  };\n\n  // Send approval email\n  const handleSendApprovalEmail = async () => {\n    try {\n      setEmailLoading(true);\n      const response = await approvalService.sendApprovalEmail(id);\n      \n      // Show success message\n      toast.success(`Onay e-postası ${response.data.sentTo} adresine gönderildi.`);\n      \n      // Update ticket emailSent status\n      setTicket(prev => ({\n        ...prev,\n        emailSent: true\n      }));\n    } catch (error) {\n      console.error('Error sending approval email:', error);\n      \n      // Show error message\n      if (error.response && error.response.data && error.response.data.error) {\n        toast.error(error.response.data.error);\n      } else {\n        toast.error('E-posta gönderilirken bir hata oluştu.');\n      }\n    } finally {\n      setEmailLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <Spinner size=\"lg\" />\n      </div>\n    );\n  }\n\n  if (error || !ticket) {\n    return (\n      <Alert\n        type=\"error\"\n        title=\"Hata\"\n        message={error || 'Destek kaydı bulunamadı.'}\n        className=\"mt-6\"\n      />\n    );\n  }\n\n  // Check if user has permission to edit/delete\n  const canEdit = isAdmin || (ticket.supportStaffId === user.id && ticket.status === 'pending');\n  const canDelete = isAdmin || (ticket.supportStaffId === user.id && ticket.status === 'pending');\n  const canSendEmail = (isAdmin || ticket.supportStaffId === user.id) && \n                       ticket.status === 'pending' && \n                       ticket.Customer?.contactEmail;\n  \n  return (\n    <div>\n      <PageHeader\n        title=\"Destek Kaydı Detayı\"\n        description=\"Destek kaydı bilgilerini görüntüleyin\"\n        breadcrumbItems={[\n          { label: 'Destek Kayıtları', to: '/tickets' },\n          { label: 'Detay' }\n        ]}\n        actions={\n          <div className=\"flex flex-col sm:flex-row w-full sm:w-auto space-y-2 sm:space-y-0 sm:space-x-2\">\n            {canEdit && (\n              <Link\n                to={`/tickets/${id}/edit`}\n                className=\"btn btn-outline flex items-center justify-center w-full sm:w-auto\"\n              >\n                <PencilIcon className=\"-ml-1 mr-2 h-5 w-5\" />\n                Düzenle\n              </Link>\n            )}\n            {canDelete && (\n              <button\n                type=\"button\"\n                className=\"btn btn-danger flex items-center justify-center w-full sm:w-auto\"\n                onClick={() => setShowDeleteModal(true)}\n              >\n                <TrashIcon className=\"-ml-1 mr-2 h-5 w-5\" />\n                Sil\n              </button>\n            )}\n            {canSendEmail && (\n              <button\n                type=\"button\"\n                className=\"btn btn-primary flex items-center justify-center w-full sm:w-auto\"\n                onClick={handleSendApprovalEmail}\n                disabled={emailLoading}\n              >\n                {emailLoading ? (\n                  <div className=\"flex items-center\">\n                    <Spinner size=\"sm\" color=\"white\" className=\"mr-2\" /> Gönderiliyor...\n                  </div>\n                ) : (\n                  <>\n                    <EnvelopeIcon className=\"-ml-1 mr-2 h-5 w-5\" />\n                    E-posta ile Onay İste\n                  </>\n                )}\n              </button>\n            )}\n          </div>\n        }\n      />\n\n      <div className=\"mt-6 grid grid-cols-1 gap-6 lg:grid-cols-3\">\n        {/* Ticket Details */}\n        <div className=\"lg:col-span-2\">\n          <Card title=\"Destek Kaydı Bilgileri\">\n            <div className=\"border-b border-gray-200 pb-4\">\n              <div className=\"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2\">\n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-500\">Müşteri</h4>\n                  <p className=\"mt-1 text-sm text-gray-900\">{ticket.Customer?.name}</p>\n                </div>\n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-500\">Kategori</h4>\n                  <div className=\"mt-1\">\n                    <span \n                      className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\"\n                      style={{ \n                        backgroundColor: `${ticket.Category?.color}20`, \n                        color: ticket.Category?.color \n                      }}\n                    >\n                      {ticket.Category?.name}\n                    </span>\n                  </div>\n                </div>\n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-500\">Başlangıç Zamanı</h4>\n                  <p className=\"mt-1 text-sm text-gray-900\">\n                    {format(new Date(ticket.startTime), 'dd MMMM yyyy HH:mm', { locale: tr })}\n                  </p>\n                </div>\n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-500\">Bitiş Zamanı</h4>\n                  <p className=\"mt-1 text-sm text-gray-900\">\n                    {format(new Date(ticket.endTime), 'dd MMMM yyyy HH:mm', { locale: tr })}\n                  </p>\n                </div>\n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-500\">Toplam Süre</h4>\n                  <p className=\"mt-1 text-sm text-gray-900\">\n                    {calculateDuration(ticket.startTime, ticket.endTime)} saat\n                  </p>\n                </div>\n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-500\">Durum</h4>\n                  <div className=\"mt-1\">\n                    <Badge status={ticket.status} label={getStatusLabel(ticket.status)} />\n                  </div>\n                </div>\n                {ticket.location && (\n                  <div className=\"sm:col-span-2\">\n                    <h4 className=\"text-sm font-medium text-gray-500\">Konum</h4>\n                    <p className=\"mt-1 text-sm text-gray-900\">{ticket.location}</p>\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className=\"pt-4\">\n              <h4 className=\"text-sm font-medium text-gray-500\">İş Açıklaması</h4>\n              <div className=\"mt-2 whitespace-pre-line text-sm text-gray-900\">\n                {ticket.description}\n              </div>\n            </div>\n          </Card>\n\n          {/* Images */}\n          {ticket.TicketImages && ticket.TicketImages.length > 0 && (\n            <Card title=\"Fotoğraflar\" className=\"mt-6\">\n              <div className=\"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4\">\n                {ticket.TicketImages.map((image) => (\n                  <div \n                    key={image.id} \n                    className=\"relative cursor-pointer overflow-hidden rounded-lg group aspect-square\"\n                    onClick={() => handleImageClick(image)}\n                  >\n                    <div className=\"h-full w-full overflow-hidden\">\n                      <img\n                        src={`${process.env.REACT_APP_API_URL || 'http://localhost:5051'}/${image.imagePath}`}\n                        alt={image.description || 'Destek kaydı fotoğrafı'}\n                        className=\"h-full w-full object-cover object-center transition-transform duration-200 group-hover:scale-105\"\n                      />\n                    </div>\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 opacity-0 transition-opacity duration-200 group-hover:opacity-100\">\n                      <div className=\"text-white\">\n                        <ArrowDownTrayIcon className=\"h-6 w-6 mx-auto\" />\n                        <span className=\"text-xs\">Görüntüle</span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </Card>\n          )}\n        </div>\n\n        {/* Sidebar */}\n        <div>\n          <Card className=\"mb-6\">\n            <div className=\"flex flex-col space-y-4\">\n              {/* Creator Info */}\n              <div>\n                <h4 className=\"font-medium text-gray-700\">Destek Personeli</h4>\n                <div className=\"mt-2 flex items-center\">\n                  <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary\">\n                    <span className=\"text-xl font-medium\">\n                      {ticket.supportStaff?.firstName.charAt(0)}\n                      {ticket.supportStaff?.lastName.charAt(0)}\n                    </span>\n                  </div>\n                  <div className=\"ml-3\">\n                    <p className=\"text-sm font-medium text-gray-900\">\n                      {ticket.supportStaff?.firstName} {ticket.supportStaff?.lastName}\n                    </p>\n                    <p className=\"text-xs text-gray-500\">Destek Personeli</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Created At */}\n              <div>\n                <h4 className=\"font-medium text-gray-700\">Oluşturulma Tarihi</h4>\n                <p className=\"mt-1 text-sm text-gray-600\">\n                  {format(new Date(ticket.createdAt), 'dd MMMM yyyy HH:mm', { locale: tr })}\n                </p>\n              </div>\n\n              {/* Customer Contact */}\n              {ticket.Customer?.contactPerson && (\n                <div>\n                  <h4 className=\"font-medium text-gray-700\">Müşteri Yetkilisi</h4>\n                  <p className=\"mt-1 text-sm text-gray-900\">{ticket.Customer.contactPerson}</p>\n                  {ticket.Customer.contactEmail && (\n                    <p className=\"text-sm text-gray-600\">{ticket.Customer.contactEmail}</p>\n                  )}\n                  {ticket.Customer.contactPhone && (\n                    <p className=\"text-sm text-gray-600\">{ticket.Customer.contactPhone}</p>\n                  )}\n                </div>\n              )}\n\n              {/* Approval Info */}\n              {ticket.status !== 'pending' && (\n                <div>\n                  <h4 className=\"font-medium text-gray-700\">\n                    {ticket.status === 'approved' ? 'Onay Bilgileri' : 'Red Bilgileri'}\n                  </h4>\n                  <div className=\"mt-2\">\n                    <p className=\"text-sm text-gray-600\">\n                      <span className=\"font-medium text-gray-700\">Tarih: </span>\n                      {format(new Date(ticket.approvalDate), 'dd MMMM yyyy HH:mm', { locale: tr })}\n                    </p>\n                    <p className=\"text-sm text-gray-600\">\n                      <span className=\"font-medium text-gray-700\">Onaylayan: </span>\n                      {ticket.externalApproval ? 'Müşteri (E-posta ile)' : \n                        `${ticket.approver?.firstName} ${ticket.approver?.lastName}`}\n                    </p>\n                    {ticket.approvalNotes && (\n                      <div className=\"mt-2\">\n                        <p className=\"font-medium text-gray-700 text-sm\">Notlar:</p>\n                        <p className=\"mt-1 text-sm text-gray-600 whitespace-pre-line\">\n                          {ticket.approvalNotes}\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n\n              {/* Admin Buttons */}\n              {isAdmin && ticket.status === 'pending' && (\n                <div className=\"mt-4 pt-4 border-t border-gray-200\">\n                  <h4 className=\"font-medium text-gray-700 mb-3\">Yönetici İşlemleri</h4>\n                  <div className=\"flex flex-col space-y-2\">\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-success flex items-center justify-center w-full\"\n                      onClick={() => setShowApprovalModal(true)}\n                    >\n                      <CheckIcon className=\"-ml-1 mr-2 h-5 w-5\" />\n                      Onayla\n                    </button>\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-danger flex items-center justify-center w-full\"\n                      onClick={() => setShowRejectModal(true)}\n                    >\n                      <XMarkIcon className=\"-ml-1 mr-2 h-5 w-5\" />\n                      Reddet\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          </Card>\n        </div>\n      </div>\n\n      {/* Approval Modal */}\n      <Modal\n        open={showApprovalModal}\n        onClose={() => setShowApprovalModal(false)}\n        title=\"Destek Kaydını Onayla\"\n        footer={\n          <>\n            <button\n              type=\"button\"\n              className=\"btn btn-outline\"\n              onClick={() => setShowApprovalModal(false)}\n              disabled={approvalLoading}\n            >\n              İptal\n            </button>\n            <button\n              type=\"button\"\n              className=\"btn btn-success ml-3\"\n              onClick={handleApprove}\n              disabled={approvalLoading}\n            >\n              {approvalLoading ? (\n                <div className=\"flex items-center\">\n                  <Spinner size=\"sm\" color=\"white\" className=\"mr-2\" /> Onaylanıyor...\n                </div>\n              ) : (\n                'Onayla'\n              )}\n            </button>\n          </>\n        }\n      >\n        <p className=\"text-gray-600\">\n          Bu destek kaydını onaylamak üzeresiniz. Onay sonrası bu işlem geri alınamaz.\n        </p>\n        <div className=\"mt-4\">\n          <label htmlFor=\"approvalNotes\" className=\"block text-sm font-medium text-gray-700\">\n            Onay Notları (İsteğe Bağlı)\n          </label>\n          <textarea\n            id=\"approvalNotes\"\n            className=\"mt-1 form-input\"\n            rows={3}\n            value={approvalNotes}\n            onChange={(e) => setApprovalNotes(e.target.value)}\n          />\n        </div>\n      </Modal>\n\n      {/* Reject Modal */}\n      <Modal\n        open={showRejectModal}\n        onClose={() => setShowRejectModal(false)}\n        title=\"Destek Kaydını Reddet\"\n        footer={\n          <>\n            <button\n              type=\"button\"\n              className=\"btn btn-outline\"\n              onClick={() => setShowRejectModal(false)}\n              disabled={approvalLoading}\n            >\n              İptal\n            </button>\n            <button\n              type=\"button\"\n              className=\"btn btn-danger ml-3\"\n              onClick={handleReject}\n              disabled={approvalLoading}\n            >\n              {approvalLoading ? (\n                <div className=\"flex items-center\">\n                  <Spinner size=\"sm\" color=\"white\" className=\"mr-2\" /> İşleniyor...\n                </div>\n              ) : (\n                'Reddet'\n              )}\n            </button>\n          </>\n        }\n      >\n        <p className=\"text-gray-600\">\n          Bu destek kaydını reddetmek üzeresiniz. Ret sonrası bu işlem geri alınamaz.\n        </p>\n        <div className=\"mt-4\">\n          <label htmlFor=\"rejectNotes\" className=\"block text-sm font-medium text-gray-700\">\n            Ret Nedeni\n          </label>\n          <textarea\n            id=\"rejectNotes\"\n            className=\"mt-1 form-input\"\n            rows={3}\n            value={rejectNotes}\n            onChange={(e) => setRejectNotes(e.target.value)}\n            required\n          />\n        </div>\n      </Modal>\n\n      {/* Delete Confirmation Modal */}\n      <Modal\n        open={showDeleteModal}\n        onClose={() => setShowDeleteModal(false)}\n        title=\"Destek Kaydını Sil\"\n        footer={\n          <>\n            <button\n              type=\"button\"\n              className=\"btn btn-outline\"\n              onClick={() => setShowDeleteModal(false)}\n              disabled={deleteLoading}\n            >\n              İptal\n            </button>\n            <button\n              type=\"button\"\n              className=\"btn btn-danger ml-3\"\n              onClick={handleDelete}\n              disabled={deleteLoading}\n            >\n              {deleteLoading ? (\n                <div className=\"flex items-center\">\n                  <Spinner size=\"sm\" color=\"white\" className=\"mr-2\" /> Siliniyor...\n                </div>\n              ) : (\n                'Sil'\n              )}\n            </button>\n          </>\n        }\n      >\n        <div className=\"text-gray-600\">\n          <p>Bu destek kaydını silmek istediğinizden emin misiniz?</p>\n          <p className=\"mt-2 font-medium\">Bu işlem geri alınamaz.</p>\n        </div>\n      </Modal>\n\n      {/* Image View Modal */}\n      <Modal\n        open={showImageModal}\n        onClose={() => setShowImageModal(false)}\n        title=\"Fotoğraf Görüntüleme\"\n        size=\"lg\"\n      >\n        {selectedImage && (\n          <div className=\"flex flex-col items-center\">\n            <img\n              src={`${process.env.REACT_APP_API_URL || 'http://localhost:5051'}/${selectedImage.imagePath}`}\n              alt={selectedImage.description || 'Destek kaydı fotoğrafı'}\n              className=\"max-h-96 max-w-full object-contain\"\n            />\n            {selectedImage.description && (\n              <p className=\"mt-4 text-center text-gray-700\">{selectedImage.description}</p>\n            )}\n            <div className=\"mt-4\">\n              <a\n                href={`${process.env.REACT_APP_API_URL || 'http://localhost:5051'}/${selectedImage.imagePath}`}\n                download\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"btn btn-primary flex items-center\"\n              >\n                <ArrowDownTrayIcon className=\"-ml-1 mr-2 h-5 w-5\" />\n                İndir\n              </a>\n            </div>\n          </div>\n        )}\n      </Modal>\n    </div>\n  );\n};\n\nexport default TicketDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}